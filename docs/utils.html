---

title: utils


keywords: fastai
sidebar: home_sidebar

summary: "Supplies basic utility functions."
description: "Supplies basic utility functions."
nb_path: "nbs/utils.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/utils.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pn</span><span class="o">.</span><span class="n">extension</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="dfe86369-8a29-4ea7-8455-a06ac3a0cc04"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#dfe86369-8a29-4ea7-8455-a06ac3a0cc04');

(function(root) {
  function now() {
    return new Date();
  }

  var force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error() {
      console.error("failed to load " + url);
    }

    for (var i = 0; i < css_urls.length; i++) {
      var url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error;
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    var skip = [];
    if (window.requirejs) {
      require([], function() {
      })
    }
    for (var i = 0; i < js_urls.length; i++) {
      var url = js_urls[i];
      if (skip.indexOf(url) >= 0) { on_load(); continue; }
      var element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error;
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
	if (!js_urls.length) {
      on_load()
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  var js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-2.2.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.2.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.2.3.min.js", "https://unpkg.com/@holoviz/panel@^0.10.2/dist/panel.min.js"];
  var css_urls = ["https://unpkg.com/@holoviz/panel@0.10.2/dist/css/card.css", "https://unpkg.com/@holoviz/panel@0.10.2/dist/css/json.css", "https://unpkg.com/@holoviz/panel@0.10.2/dist/css/dataframe.css", "https://unpkg.com/@holoviz/panel@0.10.2/dist/css/alerts.css", "https://unpkg.com/@holoviz/panel@0.10.2/dist/css/markdown.css", "https://unpkg.com/@holoviz/panel@0.10.2/dist/css/widgets.css"];

  var inline_js = [
    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
    function(Bokeh) {} // ensure no trailing comma for IE
  ];

  function run_inline_js() {
    if ((root.Bokeh !== undefined) || (force === true)) {
      for (var i = 0; i < inline_js.length; i++) {
        inline_js[i].call(root, root.Bokeh);
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    }
  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));
</script>
</div>

</div>

<div class="output_area">




<div id="1c5eb17f-b793-47b8-b544-fb5dfe040475"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#1c5eb17f-b793-47b8-b544-fb5dfe040475');

if ((window.PyViz === undefined) || (window.PyViz instanceof HTMLElement)) {
  window.PyViz = {comms: {}, comm_status:{}, kernels:{}, receivers: {}, plot_index: []}
}


    function JupyterCommManager() {
    }

    JupyterCommManager.prototype.register_target = function(plot_id, comm_id, msg_handler) {
      if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
        comm_manager.register_target(comm_id, function(comm) {
          comm.on_msg(msg_handler);
        });
      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
        window.PyViz.kernels[plot_id].registerCommTarget(comm_id, function(comm) {
          comm.onMsg = msg_handler;
        });
      } else if (typeof google != 'undefined' && google.colab.kernel != null) {
        google.colab.kernel.comms.registerTarget(comm_id, (comm) => {
          var messages = comm.messages[Symbol.asyncIterator]();
          function processIteratorResult(result) {
            var message = result.value;
            console.log(message)
            var content = {data: message.data, comm_id};
            var buffers = []
            for (var buffer of message.buffers || []) {
              buffers.push(new DataView(buffer))
            }
            var metadata = message.metadata || {};
            var msg = {content, buffers, metadata}
            msg_handler(msg);
            return messages.next().then(processIteratorResult);
          }
          return messages.next().then(processIteratorResult);
        })
      }
    }

    JupyterCommManager.prototype.get_client_comm = function(plot_id, comm_id, msg_handler) {
      if (comm_id in window.PyViz.comms) {
        return window.PyViz.comms[comm_id];
      } else if (window.comm_manager || ((window.Jupyter !== undefined) && (Jupyter.notebook.kernel != null))) {
        var comm_manager = window.comm_manager || Jupyter.notebook.kernel.comm_manager;
        var comm = comm_manager.new_comm(comm_id, {}, {}, {}, comm_id);
        if (msg_handler) {
          comm.on_msg(msg_handler);
        }
      } else if ((plot_id in window.PyViz.kernels) && (window.PyViz.kernels[plot_id])) {
        var comm = window.PyViz.kernels[plot_id].connectToComm(comm_id);
        comm.open();
        if (msg_handler) {
          comm.onMsg = msg_handler;
        }
      } else if (typeof google != 'undefined' && google.colab.kernel != null) {
        var comm_promise = google.colab.kernel.comms.open(comm_id)
        comm_promise.then((comm) => {
          window.PyViz.comms[comm_id] = comm;
          if (msg_handler) {
            var messages = comm.messages[Symbol.asyncIterator]();
            function processIteratorResult(result) {
              var message = result.value;
              var content = {data: message.data};
              var metadata = message.metadata || {comm_id};
              var msg = {content, metadata}
              msg_handler(msg);
              return messages.next().then(processIteratorResult);
            }
            return messages.next().then(processIteratorResult);
          }
        }) 
        var sendClosure = (data, metadata, buffers, disposeOnDone) => {
          return comm_promise.then((comm) => {
            comm.send(data, metadata, buffers, disposeOnDone);
          });
        };
        var comm = {
          send: sendClosure
        };
      }
      window.PyViz.comms[comm_id] = comm;
      return comm;
    }
    window.PyViz.comm_manager = new JupyterCommManager();
    


var JS_MIME_TYPE = 'application/javascript';
var HTML_MIME_TYPE = 'text/html';
var EXEC_MIME_TYPE = 'application/vnd.holoviews_exec.v0+json';
var CLASS_NAME = 'output';

/**
 * Render data to the DOM node
 */
function render(props, node) {
  var div = document.createElement("div");
  var script = document.createElement("script");
  node.appendChild(div);
  node.appendChild(script);
}

/**
 * Handle when a new output is added
 */
function handle_add_output(event, handle) {
  var output_area = handle.output_area;
  var output = handle.output;
  if ((output.data == undefined) || (!output.data.hasOwnProperty(EXEC_MIME_TYPE))) {
    return
  }
  var id = output.metadata[EXEC_MIME_TYPE]["id"];
  var toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);
  if (id !== undefined) {
    var nchildren = toinsert.length;
    var html_node = toinsert[nchildren-1].children[0];
    html_node.innerHTML = output.data[HTML_MIME_TYPE];
    var scripts = [];
    var nodelist = html_node.querySelectorAll("script");
    for (var i in nodelist) {
      if (nodelist.hasOwnProperty(i)) {
        scripts.push(nodelist[i])
      }
    }

    scripts.forEach( function (oldScript) {
      var newScript = document.createElement("script");
      var attrs = [];
      var nodemap = oldScript.attributes;
      for (var j in nodemap) {
        if (nodemap.hasOwnProperty(j)) {
          attrs.push(nodemap[j])
        }
      }
      attrs.forEach(function(attr) { newScript.setAttribute(attr.name, attr.value) });
      newScript.appendChild(document.createTextNode(oldScript.innerHTML));
      oldScript.parentNode.replaceChild(newScript, oldScript);
    });
    if (JS_MIME_TYPE in output.data) {
      toinsert[nchildren-1].children[1].textContent = output.data[JS_MIME_TYPE];
    }
    output_area._hv_plot_id = id;
    if ((window.Bokeh !== undefined) && (id in Bokeh.index)) {
      window.PyViz.plot_index[id] = Bokeh.index[id];
    } else {
      window.PyViz.plot_index[id] = null;
    }
  } else if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
    var bk_div = document.createElement("div");
    bk_div.innerHTML = output.data[HTML_MIME_TYPE];
    var script_attrs = bk_div.children[0].attributes;
    for (var i = 0; i < script_attrs.length; i++) {
      toinsert[toinsert.length - 1].childNodes[1].setAttribute(script_attrs[i].name, script_attrs[i].value);
    }
    // store reference to server id on output_area
    output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
  }
}

/**
 * Handle when an output is cleared or removed
 */
function handle_clear_output(event, handle) {
  var id = handle.cell.output_area._hv_plot_id;
  var server_id = handle.cell.output_area._bokeh_server_id;
  if (((id === undefined) || !(id in PyViz.plot_index)) && (server_id !== undefined)) { return; }
  var comm = window.PyViz.comm_manager.get_client_comm("hv-extension-comm", "hv-extension-comm", function () {});
  if (server_id !== null) {
    comm.send({event_type: 'server_delete', 'id': server_id});
    return;
  } else if (comm !== null) {
    comm.send({event_type: 'delete', 'id': id});
  }
  delete PyViz.plot_index[id];
  if ((window.Bokeh !== undefined) & (id in window.Bokeh.index)) {
    var doc = window.Bokeh.index[id].model.document
    doc.clear();
    const i = window.Bokeh.documents.indexOf(doc);
    if (i > -1) {
      window.Bokeh.documents.splice(i, 1);
    }
  }
}

/**
 * Handle kernel restart event
 */
function handle_kernel_cleanup(event, handle) {
  delete PyViz.comms["hv-extension-comm"];
  window.PyViz.plot_index = {}
}

/**
 * Handle update_display_data messages
 */
function handle_update_output(event, handle) {
  handle_clear_output(event, {cell: {output_area: handle.output_area}})
  handle_add_output(event, handle)
}

function register_renderer(events, OutputArea) {
  function append_mime(data, metadata, element) {
    // create a DOM node to render to
    var toinsert = this.create_output_subarea(
    metadata,
    CLASS_NAME,
    EXEC_MIME_TYPE
    );
    this.keyboard_manager.register_events(toinsert);
    // Render to node
    var props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
    render(props, toinsert[0]);
    element.append(toinsert);
    return toinsert
  }

  events.on('output_added.OutputArea', handle_add_output);
  events.on('output_updated.OutputArea', handle_update_output);
  events.on('clear_output.CodeCell', handle_clear_output);
  events.on('delete.Cell', handle_clear_output);
  events.on('kernel_ready.Kernel', handle_kernel_cleanup);

  OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
    safe: true,
    index: 0
  });
}

if (window.Jupyter !== undefined) {
  try {
    var events = require('base/js/events');
    var OutputArea = require('notebook/js/outputarea').OutputArea;
    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  } catch(err) {
  }
}

</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Test-data-setup">Test data setup<a class="anchor-link" href="#Test-data-setup"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">icedata</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_data_dir</span> <span class="o">=</span> <span class="n">icedata</span><span class="o">.</span><span class="n">fridge</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
<span class="n">test_class_map</span> <span class="o">=</span> <span class="n">icedata</span><span class="o">.</span><span class="n">fridge</span><span class="o">.</span><span class="n">class_map</span><span class="p">()</span>
<span class="n">test_parser</span> <span class="o">=</span> <span class="n">icedata</span><span class="o">.</span><span class="n">fridge</span><span class="o">.</span><span class="n">parser</span><span class="p">(</span><span class="n">test_data_dir</span><span class="p">,</span> <span class="n">test_class_map</span><span class="p">)</span>
<span class="n">test_train_records</span><span class="p">,</span> <span class="n">test_valid_records</span> <span class="o">=</span> <span class="n">test_parser</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre><span class="ansi-bold">INFO    </span> - <span class="ansi-blue-intense-fg ansi-bold">Autofixing records</span> | <span class="ansi-cyan-fg">icevision.parsers.parser</span>:<span class="ansi-cyan-fg">parse</span>:<span class="ansi-cyan-fg">126</span>
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Data">Data<a class="anchor-link" href="#Data"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="aggregate_record_data" class="doc_header"><code>aggregate_record_data</code><a href="https://github.com/fstroth/icevision_dashboard/tree/master/icevision_dashboard/utils.py#L23" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>aggregate_record_data</code>(<strong><code>records</code></strong>, <strong><code>class_map</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Aggregates stats from a list of records and returns a pandas dataframe with the aggregated stats. The creation time is not necessarily the real creation time.
This depends on the OS, for more information see: <a href="https://docs.python.org/3/library/os.html#os.stat_result">https://docs.python.org/3/library/os.html#os.stat_result</a>.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_agg_data</span> <span class="o">=</span> <span class="n">aggregate_record_data</span><span class="p">(</span><span class="n">test_valid_records</span><span class="p">)</span>
<span class="n">test_agg_data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>width</th>
      <th>height</th>
      <th>label</th>
      <th>bbox_xmin</th>
      <th>bbox_xmax</th>
      <th>bbox_ymin</th>
      <th>bbox_ymax</th>
      <th>area</th>
      <th>area_normalized</th>
      <th>bbox_ratio</th>
      <th>record_index</th>
      <th>bbox_width</th>
      <th>bbox_height</th>
      <th>filepath</th>
      <th>creation_date</th>
      <th>modification_date</th>
      <th>num_annotations</th>
      <th>label_num</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>67</td>
      <td>499</td>
      <td>666</td>
      <td>2</td>
      <td>19</td>
      <td>161</td>
      <td>188</td>
      <td>503</td>
      <td>44730</td>
      <td>0.134594</td>
      <td>0.450794</td>
      <td>0</td>
      <td>142</td>
      <td>315</td>
      <td>/home/frederik/.icevision/data/fridge/odFridgeObjects/images/44.jpg</td>
      <td>2020-12-14 21:50:19.148311</td>
      <td>2020-12-14 21:50:19.148311</td>
      <td>3</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>67</td>
      <td>499</td>
      <td>666</td>
      <td>4</td>
      <td>203</td>
      <td>306</td>
      <td>231</td>
      <td>516</td>
      <td>29355</td>
      <td>0.088330</td>
      <td>0.361404</td>
      <td>0</td>
      <td>103</td>
      <td>285</td>
      <td>/home/frederik/.icevision/data/fridge/odFridgeObjects/images/44.jpg</td>
      <td>2020-12-14 21:50:19.148311</td>
      <td>2020-12-14 21:50:19.148311</td>
      <td>3</td>
      <td>4</td>
    </tr>
    <tr>
      <th>2</th>
      <td>67</td>
      <td>499</td>
      <td>666</td>
      <td>3</td>
      <td>344</td>
      <td>455</td>
      <td>266</td>
      <td>529</td>
      <td>29193</td>
      <td>0.087842</td>
      <td>0.422053</td>
      <td>0</td>
      <td>111</td>
      <td>263</td>
      <td>/home/frederik/.icevision/data/fridge/odFridgeObjects/images/44.jpg</td>
      <td>2020-12-14 21:50:19.148311</td>
      <td>2020-12-14 21:50:19.148311</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>5</td>
      <td>499</td>
      <td>666</td>
      <td>1</td>
      <td>144</td>
      <td>318</td>
      <td>260</td>
      <td>429</td>
      <td>29406</td>
      <td>0.088483</td>
      <td>1.029586</td>
      <td>1</td>
      <td>174</td>
      <td>169</td>
      <td>/home/frederik/.icevision/data/fridge/odFridgeObjects/images/103.jpg</td>
      <td>2020-12-14 21:50:19.176311</td>
      <td>2020-12-14 21:50:19.176311</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>102</td>
      <td>499</td>
      <td>666</td>
      <td>3</td>
      <td>32</td>
      <td>153</td>
      <td>247</td>
      <td>513</td>
      <td>32186</td>
      <td>0.096848</td>
      <td>0.454887</td>
      <td>2</td>
      <td>121</td>
      <td>266</td>
      <td>/home/frederik/.icevision/data/fridge/odFridgeObjects/images/76.jpg</td>
      <td>2020-12-14 21:50:19.132311</td>
      <td>2020-12-14 21:50:19.132311</td>
      <td>4</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="dataset_stats" class="doc_header"><code>dataset_stats</code><a href="https://github.com/fstroth/icevision_dashboard/tree/master/icevision_dashboard/utils.py#L51" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>dataset_stats</code>(<strong><code>data</code></strong>:<code>DataFrame</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dataset_stats</span><span class="p">(</span><span class="n">test_agg_data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="class_stats" class="doc_header"><code>class_stats</code><a href="https://github.com/fstroth/icevision_dashboard/tree/master/icevision_dashboard/utils.py#L55" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>class_stats</code>(<strong><code>data</code></strong>:<code>DataFrame</code>)</p>
</blockquote>
<p>Creates a dataframe containing stats about the object classes.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">class_stats</span><span class="p">(</span><span class="n">test_agg_data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Class</th>
      <th>imgs</th>
      <th>objects</th>
      <th>objects_per_img</th>
      <th>frac_of_labels</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>14.0</td>
      <td>14.0</td>
      <td>1.0</td>
      <td>0.23</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>18.0</td>
      <td>18.0</td>
      <td>1.0</td>
      <td>0.29</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>15.0</td>
      <td>15.0</td>
      <td>1.0</td>
      <td>0.24</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>15.0</td>
      <td>15.0</td>
      <td>1.0</td>
      <td>0.24</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="image_stats" class="doc_header"><code>image_stats</code><a href="https://github.com/fstroth/icevision_dashboard/tree/master/icevision_dashboard/utils.py#L71" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>image_stats</code>(<strong><code>data</code></strong>:<code>DataFrame</code>)</p>
</blockquote>
<p>Creates a dataframe containing stats about the images.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">image_stats</span><span class="p">(</span><span class="n">test_agg_data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Num. imgs.</th>
      <th>Min Num. Objects</th>
      <th>Max Num. Objects</th>
      <th>Avg. Objects/Img</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>26.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>2.9</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_mixing_matrix" class="doc_header"><code>get_mixing_matrix</code><a href="https://github.com/fstroth/icevision_dashboard/tree/master/icevision_dashboard/utils.py#L82" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_mixing_matrix</code>(<strong><code>data</code></strong>, <strong><code>mixing_col</code></strong>, <strong><code>mixing_objects</code></strong>, <strong><code>return_df</code></strong>=<em><code>True</code></em>)</p>
</blockquote>
<p>Calculates mixing matrix for the mixing_objects column where they mix in the mixing_col.
By standard the object class mixing matrix over the images is calculated.
Returns the mixing matrix and the mapping between label and mixing matrix index.
If return_df is True (default) a dataframe (instead of the mixing matrix) will be returned that can be directly consumed by histogram_2d.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Only counts once if objects occure in the same image not multiplt times.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_mixing_matrix_df</span><span class="p">,</span> <span class="n">test_mixing_matrix_mapping</span> <span class="o">=</span> <span class="n">get_mixing_matrix</span><span class="p">(</span><span class="n">aggregate_record_data</span><span class="p">(</span><span class="n">test_valid_records</span><span class="p">),</span> <span class="n">mixing_col</span><span class="o">=</span><span class="s2">&quot;filepath&quot;</span><span class="p">,</span> <span class="n">mixing_objects</span><span class="o">=</span><span class="s2">&quot;label&quot;</span><span class="p">)</span>
<span class="c1"># test class_map</span>
<span class="n">test_mixing_matrix_df</span><span class="p">,</span> <span class="n">test_mixing_matrix_mapping</span> <span class="o">=</span> <span class="n">get_mixing_matrix</span><span class="p">(</span><span class="n">test_agg_data</span><span class="p">,</span> <span class="n">mixing_col</span><span class="o">=</span><span class="s2">&quot;filepath&quot;</span><span class="p">,</span> <span class="n">mixing_objects</span><span class="o">=</span><span class="s2">&quot;label&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_mixing_matrix_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>values</th>
      <th>col_name</th>
      <th>row_name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10.0</td>
      <td>2</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>9.0</td>
      <td>3</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>8.0</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>10.0</td>
      <td>1</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Plotting">Plotting<a class="anchor-link" href="#Plotting"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="convert_rgb_image_to_bokeh_rgb_image" class="doc_header"><code>convert_rgb_image_to_bokeh_rgb_image</code><a href="https://github.com/fstroth/icevision_dashboard/tree/master/icevision_dashboard/utils.py#L113" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>convert_rgb_image_to_bokeh_rgb_image</code>(<strong><code>img</code></strong>:<code>ndarray</code>)</p>
</blockquote>
<p>Convertes a image in the form of a numpy array to an array that can be shown by bokeh.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Bokeh requries images to be in a hw format where each value is a 32bit integer where each of the 8bit sequences contains the rgb and alpha values.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="draw_record_with_bokeh" class="doc_header"><code>draw_record_with_bokeh</code><a href="https://github.com/fstroth/icevision_dashboard/tree/master/icevision_dashboard/utils.py#L126" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>draw_record_with_bokeh</code>(<strong><code>record</code></strong>, <strong><code>class_map</code></strong>=<em><code>None</code></em>, <strong><code>display_label</code></strong>=<em><code>True</code></em>, <strong><code>display_bbox</code></strong>=<em><code>False</code></em>, <strong><code>display_mask</code></strong>=<em><code>False</code></em>, <strong><code>display_keypoints</code></strong>=<em><code>False</code></em>, <strong><code>return_figure</code></strong>=<em><code>False</code></em>, <strong><code>width</code></strong>=<em><code>None</code></em>, <strong><code>height</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Draws a record or returns a bokeh figure containing the image.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Wrapper around the <code>draw_record</code> function from icevision. The aspect ratio of the image will be preserved when only width or height is given (scaling the other accordingly).</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%capture</span> --no-stderr
<span class="n">draw_record_with_bokeh</span><span class="p">(</span><span class="n">test_train_records</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">width</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="barplot" class="doc_header"><code>barplot</code><a href="https://github.com/fstroth/icevision_dashboard/tree/master/icevision_dashboard/utils.py#L171" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>barplot</code>(<strong><code>counts</code></strong>, <strong><code>values</code></strong>, <strong><code>class_map</code></strong>=<em><code>None</code></em>, <strong><code>bar_type</code></strong>=<em><code>'horizontal'</code></em>, <strong><code>width</code></strong>=<em><code>500</code></em>, <strong><code>height</code></strong>=<em><code>500</code></em>)</p>
</blockquote>
<p>Creates a figure with a barplot, were the counts is the bar height and values are the labels for the bars.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%capture</span> --no-stderr
<span class="c1"># test draw_histogram without a classmap</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">barplot</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%capture</span> --no-stderr
<span class="c1"># test draw_histogram without a classmap</span>
<span class="n">hist</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">20</span><span class="p">]]</span>
<span class="n">cls_map</span> <span class="o">=</span> <span class="n">ClassMap</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">])</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">barplot</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">cls_map</span><span class="p">,</span> <span class="n">bar_type</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">)</span>
<span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="histogram" class="doc_header"><code>histogram</code><a href="https://github.com/fstroth/icevision_dashboard/tree/master/icevision_dashboard/utils.py#L187" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>histogram</code>(<strong><code>values</code></strong>, <strong><code>bins</code></strong>=<em><code>10</code></em>, <strong><code>range</code></strong>=<em><code>None</code></em>, <strong><code>density</code></strong>=<em><code>False</code></em>, <strong><code>plot_figure</code></strong>=<em><code>None</code></em>, <strong><code>remove_tools</code></strong>=<em><code>False</code></em>, <strong><code>width</code></strong>=<em><code>500</code></em>, <strong><code>height</code></strong>=<em><code>500</code></em>)</p>
</blockquote>
<p>Creates a histogram</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%capture</span> --no-stderr
<span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">histogram</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%capture</span> --no-stderr
<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Test&quot;</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">histogram</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">plot_figure</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>
<span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="histogram_2d" class="doc_header"><code>histogram_2d</code><a href="https://github.com/fstroth/icevision_dashboard/tree/master/icevision_dashboard/utils.py#L201" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>histogram_2d</code>(<strong><code>df</code></strong>, <strong><code>x</code></strong>, <strong><code>y</code></strong>, <strong><code>values</code></strong>, <strong><code>color_mapper</code></strong>=<em><code>None</code></em>, <strong><code>height</code></strong>=<em><code>500</code></em>, <strong><code>width</code></strong>=<em><code>500</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%capture</span> --no-stderr
<span class="n">pn</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">histogram_2d</span><span class="p">(</span><span class="n">test_mixing_matrix_df</span><span class="p">,</span> <span class="s2">&quot;row_name&quot;</span><span class="p">,</span> <span class="s2">&quot;col_name&quot;</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="time_arc_plot" class="doc_header"><code>time_arc_plot</code><a href="https://github.com/fstroth/icevision_dashboard/tree/master/icevision_dashboard/utils.py#L238" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>time_arc_plot</code>(<strong><code>start_date</code></strong>, <strong><code>end_date</code></strong>, <strong><code>plot_figure</code></strong>=<em><code>None</code></em>, <strong><code>width</code></strong>=<em><code>500</code></em>, <strong><code>height</code></strong>=<em><code>300</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%capture</span> --no-stderr
<span class="n">random_time_delta</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">test_agg_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;t_delta&quot;</span><span class="p">])</span>
<span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">time_arc_plot</span><span class="p">(</span><span class="n">test_agg_data</span><span class="p">[</span><span class="s2">&quot;creation_date&quot;</span><span class="p">],</span> <span class="n">test_agg_data</span><span class="p">[</span><span class="s2">&quot;modification_date&quot;</span><span class="p">]</span><span class="o">+</span><span class="n">random_time_delta</span><span class="p">[</span><span class="s2">&quot;t_delta&quot;</span><span class="p">]))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="table_from_dataframe" class="doc_header"><code>table_from_dataframe</code><a href="https://github.com/fstroth/icevision_dashboard/tree/master/icevision_dashboard/utils.py#L254" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>table_from_dataframe</code>(<strong><code>dataframe</code></strong>, <strong><code>columns</code></strong>=<em><code>None</code></em>, <strong><code>width</code></strong>=<em><code>500</code></em>, <strong><code>height</code></strong>=<em><code>200</code></em>, <strong><code>index_position</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%capture</span> --no-stderr
<span class="n">show</span><span class="p">(</span><span class="n">table_from_dataframe</span><span class="p">(</span><span class="n">test_agg_data</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Controll-elements">Controll elements<a class="anchor-link" href="#Controll-elements"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="generate_range_filter" class="doc_header"><code>generate_range_filter</code><a href="https://github.com/fstroth/icevision_dashboard/tree/master/icevision_dashboard/utils.py#L266" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>generate_range_filter</code>(<strong><code>data</code></strong>, <strong><code>name</code></strong>, <strong><code>with_hist</code></strong>=<em><code>True</code></em>, <strong><code>steps</code></strong>=<em><code>50</code></em>, <strong><code>height</code></strong>=<em><code>500</code></em>, <strong><code>width</code></strong>=<em><code>500</code></em>)</p>
</blockquote>
<p>Generates a range slider with a histogram (if with_hist is True) for a given pd.DataFrame and a column key.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%capture</span> --no-stderr
<span class="n">generate_range_filter</span><span class="p">(</span><span class="n">test_agg_data</span><span class="p">[</span><span class="s2">&quot;area&quot;</span><span class="p">],</span> <span class="s2">&quot;Area&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_min_and_max_dates" class="doc_header"><code>get_min_and_max_dates</code><a href="https://github.com/fstroth/icevision_dashboard/tree/master/icevision_dashboard/utils.py#L283" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_min_and_max_dates</code>(<strong><code>dates</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="generate_creation_modification_time_filter" class="doc_header"><code>generate_creation_modification_time_filter</code><a href="https://github.com/fstroth/icevision_dashboard/tree/master/icevision_dashboard/utils.py#L292" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>generate_creation_modification_time_filter</code>(<strong><code>data</code></strong>, <strong><code>width</code></strong>=<em><code>500</code></em>, <strong><code>height</code></strong>=<em><code>500</code></em>)</p>
</blockquote>
<p>Generates an arc plot with creation and modification time and two range sliders to select parts for the two.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%capture</span> --no-stderr
<span class="n">test_time_selection</span> <span class="o">=</span> <span class="n">test_agg_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">test_time_selection</span><span class="p">[</span><span class="s2">&quot;modification_date&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">random_time_delta</span><span class="p">[</span><span class="s2">&quot;t_delta&quot;</span><span class="p">]</span>
<span class="n">generate_creation_modification_time_filter</span><span class="p">(</span><span class="n">test_time_selection</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

